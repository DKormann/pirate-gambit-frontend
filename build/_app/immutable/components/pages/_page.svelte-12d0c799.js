import{S as K,i as Y,s as z,k as v,q as U,a as D,l as k,m as j,r as H,h as a,c as q,n as O,b as E,F as m,H as C,I as L,A as G,J as ye,p as Ee,u as F,K as te,L as W,e as ee,g as le,t as M,d as se,f as R,v as X,w as Z,x as $,y as x,M as we}from"../../chunks/index-d27af812.js";import{u as A}from"../../chunks/utils-e22b2b39.js";function re(n){let t,s;return{c(){t=v("p"),s=U(n[1]),this.h()},l(e){t=k(e,"P",{style:!0});var l=j(t);s=H(l,n[1]),l.forEach(a),this.h()},h(){Ee(t,"color","red")},m(e,l){E(e,t,l),m(t,s)},p(e,l){l&2&&F(s,e[1])},d(e){e&&a(t)}}}function Pe(n){let t,s,e,l,r,o,i,u,f,h,d,p,N,_,w,y,J,T,P,c,b,I,S=n[1]&&re(n);return{c(){t=v("h1"),s=U("create account"),e=D(),l=v("h2"),r=U(`username
`),o=v("input"),i=D(),u=v("p"),f=U(`

password
`),h=v("input"),d=D(),p=v("p"),N=U(`

email
`),_=v("input"),w=D(),S&&S.c(),y=D(),J=v("p"),T=D(),P=v("button"),c=U("join"),this.h()},l(g){t=k(g,"H1",{});var V=j(t);s=H(V,"create account"),V.forEach(a),e=q(g),l=k(g,"H2",{});var B=j(l);r=H(B,`username
`),o=k(B,"INPUT",{type:!0}),i=q(B),u=k(B,"P",{}),j(u).forEach(a),f=H(B,`

password
`),h=k(B,"INPUT",{type:!0}),d=q(B),p=k(B,"P",{}),j(p).forEach(a),N=H(B,`

email
`),_=k(B,"INPUT",{}),w=q(B),S&&S.l(B),y=q(B),J=k(B,"P",{}),j(J).forEach(a),T=q(B),P=k(B,"BUTTON",{});var Q=j(P);c=H(Q,"join"),Q.forEach(a),B.forEach(a),this.h()},h(){O(o,"type","text"),O(h,"type","password")},m(g,V){E(g,t,V),m(t,s),E(g,e,V),E(g,l,V),m(l,r),m(l,o),C(o,n[0].name),m(l,i),m(l,u),m(l,f),m(l,h),C(h,n[0].password),m(l,d),m(l,p),m(l,N),m(l,_),C(_,n[0].email),m(l,w),S&&S.m(l,null),m(l,y),m(l,J),m(l,T),m(l,P),m(P,c),b||(I=[L(o,"input",n[4]),L(h,"input",n[5]),L(_,"input",n[6]),L(P,"click",n[2])],b=!0)},p(g,[V]){V&1&&o.value!==g[0].name&&C(o,g[0].name),V&1&&h.value!==g[0].password&&C(h,g[0].password),V&1&&_.value!==g[0].email&&C(_,g[0].email),g[1]?S?S.p(g,V):(S=re(g),S.c(),S.m(l,y)):S&&(S.d(1),S=null)},i:G,o:G,d(g){g&&a(t),g&&a(e),g&&a(l),S&&S.d(),b=!1,ye(I)}}}function je(n,t,s){let{user:e}=t,{succ:l}=t,r="";function o(){if(e.name&&e.password){if(s(0,e.passhash=A.hash(e.password),e),e.email==""){s(1,r="email cant be empty");return}if(e.password==""){s(1,r="password cant be empty");return}if(e.name==""){s(1,r="username cant be empty");return}A.set_local("user_name",e.name),A.set_local("pass_hash",e.passhash),A.set_local("email",e.email),fetch(A.url+`register/${e.name}/${e.email}/${e.passhash}`,{method:"get"}).then(h=>{console.log(h),h.text().then(d=>{console.log({response:d});let p=JSON.parse(d);console.log(p),p[0]?(s(0,e.loggedIn=!0,e),l()):s(1,r=`${p.details}`)})})}else s(1,r="cant be empty")}function i(){e.name=this.value,s(0,e)}function u(){e.password=this.value,s(0,e)}function f(){e.email=this.value,s(0,e)}return n.$$set=h=>{"user"in h&&s(0,e=h.user),"succ"in h&&s(3,l=h.succ)},[e,r,o,l,i,u,f]}class Ie extends K{constructor(t){super(),Y(this,t,je,Pe,z,{user:0,succ:3})}}function ie(n,t,s){const e=n.slice();return e[19]=t[s],e[21]=s,e}function ue(n,t,s){const e=n.slice();return e[19]=t[s],e[23]=s,e}function fe(n,t,s){const e=n.slice();return e[19]=t[s],e[25]=s,e}function Ne(n){let t,s=n[1].reduce(n[12])[0]+"",e,l,r,o;return{c(){t=v("h2"),e=U(s),l=U(" found the treasure!"),r=D(),o=v("p")},l(i){t=k(i,"H2",{});var u=j(t);e=H(u,s),l=H(u," found the treasure!"),u.forEach(a),r=q(i),o=k(i,"P",{}),j(o).forEach(a)},m(i,u){E(i,t,u),m(t,e),m(t,l),E(i,r,u),E(i,o,u)},p(i,u){u&3&&s!==(s=i[1].reduce(i[12])[0]+"")&&F(e,s)},d(i){i&&a(t),i&&a(r),i&&a(o)}}}function Te(n){let t,s;return{c(){t=v("h2"),s=U("find the treasure at the center!")},l(e){t=k(e,"H2",{});var l=j(t);s=H(l,"find the treasure at the center!"),l.forEach(a)},m(e,l){E(e,t,l),m(t,s)},p:G,d(e){e&&a(t)}}}function Oe(n){let t,s,e,l,r,o,i;return{c(){t=v("h2"),s=U("you got the treasure"),e=D(),l=v("h2"),r=U("get to the left border!"),o=D(),i=v("p")},l(u){t=k(u,"H2",{});var f=j(t);s=H(f,"you got the treasure"),f.forEach(a),e=q(u),l=k(u,"H2",{});var h=j(l);r=H(h,"get to the left border!"),h.forEach(a),o=q(u),i=k(u,"P",{}),j(i).forEach(a)},m(u,f){E(u,t,f),m(t,s),E(u,e,f),E(u,l,f),m(l,r),E(u,o,f),E(u,i,f)},p:G,d(u){u&&a(t),u&&a(e),u&&a(l),u&&a(o),u&&a(i)}}}function ae(n){let t,s,e,l=n[8](n[0].data[n[23]+n[25]*9])+"",r,o,i,u,f;function h(){return n[13](n[23],n[25])}return{c(){t=v("div"),s=v("div"),e=v("p"),r=U(l),this.h()},l(d){t=k(d,"DIV",{class:!0,id:!0});var p=j(t);s=k(p,"DIV",{class:!0});var N=j(s);e=k(N,"P",{class:!0});var _=j(e);r=H(_,l),_.forEach(a),N.forEach(a),p.forEach(a),this.h()},h(){O(e,"class","pinfo svelte-1oojlpg"),O(s,"class",o=W(n[6](n[0].data[n[23]+n[25]*9]))+" svelte-1oojlpg"),O(t,"class",i=W((n[23]==n[2][0]&&n[25]==n[2][1]?"active ":"")+de(n[0].data[n[23]+n[25]*9],n[0].offset[0]+n[0].offset[1]+n[23]+n[25]))+" svelte-1oojlpg"),O(t,"id","t"+n[23]+n[25])},m(d,p){E(d,t,p),m(t,s),m(s,e),m(e,r),u||(f=L(t,"click",h),u=!0)},p(d,p){n=d,p&1&&l!==(l=n[8](n[0].data[n[23]+n[25]*9])+"")&&F(r,l),p&1&&o!==(o=W(n[6](n[0].data[n[23]+n[25]*9]))+" svelte-1oojlpg")&&O(s,"class",o),p&5&&i!==(i=W((n[23]==n[2][0]&&n[25]==n[2][1]?"active ":"")+de(n[0].data[n[23]+n[25]*9],n[0].offset[0]+n[0].offset[1]+n[23]+n[25]))+" svelte-1oojlpg")&&O(t,"class",i)},d(d){d&&a(t),u=!1,f()}}}function ce(n){let t,s={length:9},e=[];for(let l=0;l<s.length;l+=1)e[l]=ae(fe(n,s,l));return{c(){t=v("div");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){t=k(l,"DIV",{class:!0});var r=j(t);for(let o=0;o<e.length;o+=1)e[o].l(r);r.forEach(a),this.h()},h(){O(t,"class","row svelte-1oojlpg")},m(l,r){E(l,t,r);for(let o=0;o<e.length;o+=1)e[o].m(t,null)},p(l,r){if(r&357){s={length:9};let o;for(o=0;o<s.length;o+=1){const i=fe(l,s,o);e[o]?e[o].p(i,r):(e[o]=ae(i),e[o].c(),e[o].m(t,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=s.length}},d(l){l&&a(t),te(e,l)}}}function Se(n){let t;return{c(){t=v("div"),this.h()},l(s){t=k(s,"DIV",{class:!0}),j(t).forEach(a),this.h()},h(){O(t,"class","tile svelte-1oojlpg")},m(s,e){E(s,t,e)},p:G,d(s){s&&a(t)}}}function Ue(n){let t,s={length:5},e=[];for(let l=0;l<s.length;l+=1)e[l]=he(ie(n,s,l));return{c(){t=v("div");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){t=k(l,"DIV",{class:!0});var r=j(t);for(let o=0;o<e.length;o+=1)e[o].l(r);r.forEach(a),this.h()},h(){O(t,"class","row svelte-1oojlpg")},m(l,r){E(l,t,r);for(let o=0;o<e.length;o+=1)e[o].m(t,null)},p(l,r){if(r&145){s={length:5};let o;for(o=0;o<s.length;o+=1){const i=ie(l,s,o);e[o]?e[o].p(i,r):(e[o]=he(i),e[o].c(),e[o].m(t,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=s.length}},d(l){l&&a(t),te(e,l)}}}function _e(n){let t,s,e,l,r;function o(){return n[14](n[21])}return{c(){t=v("div"),s=v("div"),e=D(),this.h()},l(i){t=k(i,"DIV",{class:!0});var u=j(t);s=k(u,"DIV",{class:!0});var f=j(s);f.forEach(a),e=q(u),u.forEach(a),this.h()},h(){O(s,"class",W(`piece t${n[21]+2}`)+" svelte-1oojlpg"),O(t,"class","tile svelte-1oojlpg")},m(i,u){E(i,t,u),m(t,s),m(t,e),l||(r=L(t,"click",o),l=!0)},p(i,u){n=i},d(i){i&&a(t),l=!1,r()}}}function he(n){let t,s=n[4][n[21]]<=n[0].energy&&_e(n);return{c(){s&&s.c(),t=ee()},l(e){s&&s.l(e),t=ee()},m(e,l){s&&s.m(e,l),E(e,t,l)},p(e,l){e[4][e[21]]<=e[0].energy?s?s.p(e,l):(s=_e(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(e){s&&s.d(e),e&&a(t)}}}function He(n){let t,s,e,l,r,o,i,u,f=Math.round(n[0].energy*50)/50+"",h,d;function p(c,b){return c[0].got_treasure?Oe:c[0].treasure_holder==-1?Te:Ne}let N=p(n),_=N(n),w={length:9},y=[];for(let c=0;c<w.length;c+=1)y[c]=ce(ue(n,w,c));function J(c,b){return c[3]?Ue:Se}let T=J(n),P=T(n);return{c(){t=v("div"),_.c(),s=D();for(let c=0;c<y.length;c+=1)y[c].c();e=D(),l=v("p"),r=D(),P.c(),o=D(),i=v("div"),u=v("p"),h=U(f),this.h()},l(c){t=k(c,"DIV",{class:!0});var b=j(t);_.l(b),s=q(b);for(let g=0;g<y.length;g+=1)y[g].l(b);e=q(b),l=k(b,"P",{}),j(l).forEach(a),r=q(b),P.l(b),o=q(b),i=k(b,"DIV",{class:!0,style:!0});var I=j(i);u=k(I,"P",{class:!0});var S=j(u);h=H(S,f),S.forEach(a),I.forEach(a),b.forEach(a),this.h()},h(){O(u,"class","svelte-1oojlpg"),O(i,"class","energybar svelte-1oojlpg"),O(i,"style",d=`width:${n[0].energy*2.7}em`),O(t,"class","board svelte-1oojlpg")},m(c,b){E(c,t,b),_.m(t,null),m(t,s);for(let I=0;I<y.length;I+=1)y[I].m(t,null);m(t,e),m(t,l),m(t,r),P.m(t,null),m(t,o),m(t,i),m(i,u),m(u,h)},p(c,[b]){if(N===(N=p(c))&&_?_.p(c,b):(_.d(1),_=N(c),_&&(_.c(),_.m(t,s))),b&357){w={length:9};let I;for(I=0;I<w.length;I+=1){const S=ue(c,w,I);y[I]?y[I].p(S,b):(y[I]=ce(S),y[I].c(),y[I].m(t,e))}for(;I<y.length;I+=1)y[I].d(1);y.length=w.length}T===(T=J(c))&&P?P.p(c,b):(P.d(1),P=T(c),P&&(P.c(),P.m(t,o))),b&1&&f!==(f=Math.round(c[0].energy*50)/50+"")&&F(h,f),b&1&&d!==(d=`width:${c[0].energy*2.7}em`)&&O(i,"style",d)},i:G,o:G,d(c){c&&a(t),_.d(),te(y,c),P.d()}}}let pe=20,Je=.2;function me(n,t){return n+t*9}function de(n,t){return n[0]==-1?"water tile":n[1]!=0?`c${n[0]} tile`:["light","dark"][t%2]+" tile"}function Ve(n,t,s){let{state:e}=t,{my_number:l}=t,{make_move:r}=t,{opponents:o}=t;e.data;let i=[4,4];const u=[9,3,3,5,1];let f=[-5,-5],h=!1,d=1;setInterval(()=>{e.energy<=10&&s(0,e.energy=Math.min(e.energy+Je/pe,10),e)},1e3/pe);function p(c,b){e.data[c+b*9][1]==1?s(3,h=!0):s(3,h=!1);{let S=me(f[0],f[1]),g=me(c,b);if(g==S)return;r(S,g,d,V=>{V&&(d=0)})}N(c,b)}function N(c,b){let I=document.querySelector("#t"+f[0]+f[1]);I&&I.classList.remove("active"),s(2,f=[c,b]),document.querySelector("#t"+c+b).classList.add("active")}function _(c){return c[1]==-2?"piece treasure":c[1]<=0?"":c[1]==1&&d>1&&c[0]==l?`piece t${d}`:`piece t${c[1]}`+(c[0]==l?"":" enemy")}function w(c){d=c+2}function y(c){if(c[1]==1){let b=o.reduce((I,S)=>I[1]==c[0]?I:S)[0];return b=b.split(" ")[0],b.slice(0,8)}return""}const J=(c,b)=>c[1]==e.treasure_holder?c:b,T=(c,b)=>p(c,b),P=c=>{w(c)};return n.$$set=c=>{"state"in c&&s(0,e=c.state),"my_number"in c&&s(9,l=c.my_number),"make_move"in c&&s(10,r=c.make_move),"opponents"in c&&s(1,o=c.opponents)},n.$$.update=()=>{n.$$.dirty&2053&&e.offset!=i&&(s(2,f=[f[0]+i[1]-e.offset[1],f[1]+i[0]-e.offset[0]]),s(11,i=e.offset))},[e,o,f,h,u,p,_,w,y,l,r,i,J,T,P]}class De extends K{constructor(t){super(),Y(this,t,Ve,He,z,{state:0,my_number:9,make_move:10,opponents:1})}}function ge(n,t,s){const e=n.slice();return e[14]=t[s][0],e[15]=t[s][1],e}function qe(n){let t,s,e,l,r=n[6][0]+"",o,i,u=n[5].value+"",f,h,d,p,N,_,w,y,J,T,P,c,b,I,S;return{c(){t=v("h2"),s=U("GAME OVER"),e=D(),l=v("h3"),o=U(r),i=U(" won "),f=U(u),h=U(" points!"),d=D(),p=v("p"),N=D(),_=v("button"),w=U("Play again"),y=D(),J=v("p"),T=D(),P=v("a"),c=v("button"),b=U("leaderboard"),this.h()},l(g){t=k(g,"H2",{});var V=j(t);s=H(V,"GAME OVER"),V.forEach(a),e=q(g),l=k(g,"H3",{});var B=j(l);o=H(B,r),i=H(B," won "),f=H(B,u),h=H(B," points!"),B.forEach(a),d=q(g),p=k(g,"P",{}),j(p).forEach(a),N=q(g),_=k(g,"BUTTON",{id:!0,class:!0});var Q=j(_);w=H(Q,"Play again"),Q.forEach(a),y=q(g),J=k(g,"P",{}),j(J).forEach(a),T=q(g),P=k(g,"A",{href:!0});var ne=j(P);c=k(ne,"BUTTON",{class:!0});var oe=j(c);b=H(oe,"leaderboard"),oe.forEach(a),ne.forEach(a),this.h()},h(){O(_,"id","joingame"),O(_,"class","svelte-1t21e0d"),O(c,"class","leaderboard svelte-1t21e0d"),O(P,"href","/leaderboard")},m(g,V){E(g,t,V),m(t,s),E(g,e,V),E(g,l,V),m(l,o),m(l,i),m(l,f),m(l,h),E(g,d,V),E(g,p,V),E(g,N,V),E(g,_,V),m(_,w),E(g,y,V),E(g,J,V),E(g,T,V),E(g,P,V),m(P,c),m(c,b),I||(S=L(_,"click",n[7]),I=!0)},p(g,V){V&64&&r!==(r=g[6][0]+"")&&F(o,r),V&32&&u!==(u=g[5].value+"")&&F(f,u)},i:G,o:G,d(g){g&&a(t),g&&a(e),g&&a(l),g&&a(d),g&&a(p),g&&a(N),g&&a(_),g&&a(y),g&&a(J),g&&a(T),g&&a(P),I=!1,S()}}}function Be(n){let t,s;return t=new De({props:{state:n[4],my_number:n[2],make_move:n[9],opponents:n[3]}}),{c(){X(t.$$.fragment)},l(e){Z(t.$$.fragment,e)},m(e,l){$(t,e,l),s=!0},p(e,l){const r={};l&16&&(r.state=e[4]),l&4&&(r.my_number=e[2]),l&8&&(r.opponents=e[3]),t.$set(r)},i(e){s||(R(t.$$.fragment,e),s=!0)},o(e){M(t.$$.fragment,e),s=!1},d(e){x(t,e)}}}function Ge(n){let t,s,e,l,r,o=n[3],i=[];for(let f=0;f<o.length;f+=1)i[f]=be(ge(n,o,f));let u=n[3].length>1&&ve(n);return{c(){t=v("h2"),s=U("waiting for players ..."),e=D();for(let f=0;f<i.length;f+=1)i[f].c();l=D(),u&&u.c(),r=ee()},l(f){t=k(f,"H2",{});var h=j(t);s=H(h,"waiting for players ..."),h.forEach(a),e=q(f);for(let d=0;d<i.length;d+=1)i[d].l(f);l=q(f),u&&u.l(f),r=ee()},m(f,h){E(f,t,h),m(t,s),E(f,e,h);for(let d=0;d<i.length;d+=1)i[d].m(f,h);E(f,l,h),u&&u.m(f,h),E(f,r,h)},p(f,h){if(h&8){o=f[3];let d;for(d=0;d<o.length;d+=1){const p=ge(f,o,d);i[d]?i[d].p(p,h):(i[d]=be(p),i[d].c(),i[d].m(l.parentNode,l))}for(;d<i.length;d+=1)i[d].d(1);i.length=o.length}f[3].length>1?u?u.p(f,h):(u=ve(f),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:G,o:G,d(f){f&&a(t),f&&a(e),te(i,f),f&&a(l),u&&u.d(f),f&&a(r)}}}function Ae(n){let t,s,e,l,r,o,i,u,f,h,d,p,N;return{c(){t=v("img"),e=D(),l=v("button"),r=U("Join game"),o=D(),i=v("p"),u=D(),f=v("a"),h=v("button"),d=U("leaderboard"),this.h()},l(_){t=k(_,"IMG",{src:!0,alt:!0}),e=q(_),l=k(_,"BUTTON",{id:!0,class:!0});var w=j(l);r=H(w,"Join game"),w.forEach(a),o=q(_),i=k(_,"P",{}),j(i).forEach(a),u=q(_),f=k(_,"A",{href:!0});var y=j(f);h=k(y,"BUTTON",{class:!0});var J=j(h);d=H(J,"leaderboard"),J.forEach(a),y.forEach(a),this.h()},h(){we(t.src,s="../assets/pieces.png")||O(t,"src",s),O(t,"alt",""),O(l,"id","joingame"),O(l,"class","svelte-1t21e0d"),O(h,"class","leaderboard svelte-1t21e0d"),O(f,"href","/leaderboard")},m(_,w){E(_,t,w),E(_,e,w),E(_,l,w),m(l,r),E(_,o,w),E(_,i,w),E(_,u,w),E(_,f,w),m(f,h),m(h,d),p||(N=L(l,"click",n[7]),p=!0)},p:G,i:G,o:G,d(_){_&&a(t),_&&a(e),_&&a(l),_&&a(o),_&&a(i),_&&a(u),_&&a(f),p=!1,N()}}}function be(n){let t,s=n[14]+"",e;return{c(){t=v("p"),e=U(s)},l(l){t=k(l,"P",{});var r=j(t);e=H(r,s),r.forEach(a)},m(l,r){E(l,t,r),m(t,e)},p(l,r){r&8&&s!==(s=l[14]+"")&&F(e,s)},d(l){l&&a(t)}}}function ve(n){let t,s,e,l;return{c(){t=v("button"),s=U("Start"),this.h()},l(r){t=k(r,"BUTTON",{id:!0,class:!0});var o=j(t);s=H(o,"Start"),o.forEach(a),this.h()},h(){O(t,"id","startgame"),O(t,"class","svelte-1t21e0d")},m(r,o){E(r,t,o),m(t,s),e||(l=L(t,"click",n[8]),e=!0)},p:G,d(r){r&&a(t),e=!1,l()}}}function Le(n){let t,s,e=n[0].name+"",l,r,o,i,u;const f=[Ae,Ge,Be,qe],h=[];function d(p,N){return p[1]==0?0:p[1]==1?1:p[1]==2?2:p[1]==3?3:-1}return~(o=d(n))&&(i=h[o]=f[o](n)),{c(){t=v("h2"),s=v("p"),l=U(e),r=D(),i&&i.c(),this.h()},l(p){t=k(p,"H2",{});var N=j(t);s=k(N,"P",{class:!0});var _=j(s);l=H(_,e),_.forEach(a),r=q(N),i&&i.l(N),N.forEach(a),this.h()},h(){O(s,"class","usertag svelte-1t21e0d")},m(p,N){E(p,t,N),m(t,s),m(s,l),m(t,r),~o&&h[o].m(t,null),u=!0},p(p,[N]){(!u||N&1)&&e!==(e=p[0].name+"")&&F(l,e);let _=o;o=d(p),o===_?~o&&h[o].p(p,N):(i&&(le(),M(h[_],1,1,()=>{h[_]=null}),se()),~o?(i=h[o],i?i.p(p,N):(i=h[o]=f[o](p),i.c()),R(i,1),i.m(t,null)):i=null)},i(p){u||(R(i),u=!0)},o(p){M(i),u=!1},d(p){p&&a(t),~o&&h[o].d()}}}function Me(n,t,s){let{user:e}=t,l=0,r=0,o=0,i=0,u=[],f=null,h=null,d=null;function p(){fetch(A.url+`join_game/${e.name}/${e.passhash}`).then(y=>{console.log(y),y.text().then(J=>{console.log({text:J});let T=JSON.parse(J);console.log({data:T}),T.Join?(s(1,l=1),console.log("got join message"),r=T.Join.token,o=T.Join.game_id,s(2,i=T.Join.number),N()):T.Lobby?console.log("got lobby message"):T.State&&console.log("got state message")})})}function N(){console.log("sending update request"),fetch(A.url+`get_update/${o}/${r}`).then(y=>{console.log(y),y.text().then(J=>{console.log({text:J});let T=JSON.parse(J);if(console.log({data:T}),T.Join)console.log("got join message");else if(T.Lobby)console.log("got lobby message"),s(3,u=T.Lobby.players);else if(T.State)console.log("got state message"),s(4,f=T.State),s(1,l=2);else if(T.End){s(1,l=3),console.log("got game over message"),s(5,h=T.End),console.log(h),s(6,d=u.reduce((P,c)=>P[1]==h.winning_number?P:c));return}N()})})}function _(){console.log("sending start request"),fetch(A.url+`start_game/${o}/${r}`).then(y=>{console.log(y),y.text().then(J=>{console.log(J)})})}function w(y,J,T,P){console.log("sending move"),fetch(A.url+`make_move/${o}/${r}/${y}/${J}/${T}`,{method:"post"}).then(c=>{c.text().then(b=>{console.log(b);let I=JSON.parse(b);P(I)})})}return n.$$set=y=>{"user"in y&&s(0,e=y.user)},[e,l,i,u,f,h,d,p,_,w]}class Re extends K{constructor(t){super(),Y(this,t,Me,Le,z,{user:0})}}function ke(n){let t,s;return{c(){t=v("p"),s=U(n[1]),this.h()},l(e){t=k(e,"P",{style:!0});var l=j(t);s=H(l,n[1]),l.forEach(a),this.h()},h(){Ee(t,"color","red")},m(e,l){E(e,t,l),m(t,s)},p(e,l){l&2&&F(s,e[1])},d(e){e&&a(t)}}}function Ce(n){let t,s,e,l,r,o,i,u,f,h,d,p,N,_,w,y,J,T,P=n[1]&&ke(n);return{c(){t=v("h1"),s=U("login"),e=D(),l=v("h2"),r=U(`username
`),o=v("input"),i=D(),u=v("p"),f=U(`

password
`),h=v("input"),d=D(),P&&P.c(),p=D(),N=v("p"),_=D(),w=v("button"),y=U("login"),this.h()},l(c){t=k(c,"H1",{});var b=j(t);s=H(b,"login"),b.forEach(a),e=q(c),l=k(c,"H2",{});var I=j(l);r=H(I,`username
`),o=k(I,"INPUT",{type:!0}),i=q(I),u=k(I,"P",{}),j(u).forEach(a),f=H(I,`

password
`),h=k(I,"INPUT",{type:!0}),d=q(I),P&&P.l(I),p=q(I),N=k(I,"P",{}),j(N).forEach(a),_=q(I),w=k(I,"BUTTON",{});var S=j(w);y=H(S,"login"),S.forEach(a),I.forEach(a),this.h()},h(){O(o,"type","text"),O(h,"type","password")},m(c,b){E(c,t,b),m(t,s),E(c,e,b),E(c,l,b),m(l,r),m(l,o),C(o,n[0].name),m(l,i),m(l,u),m(l,f),m(l,h),C(h,n[0].password),m(l,d),P&&P.m(l,null),m(l,p),m(l,N),m(l,_),m(l,w),m(w,y),J||(T=[L(o,"input",n[4]),L(h,"input",n[5]),L(w,"click",n[2])],J=!0)},p(c,[b]){b&1&&o.value!==c[0].name&&C(o,c[0].name),b&1&&h.value!==c[0].password&&C(h,c[0].password),c[1]?P?P.p(c,b):(P=ke(c),P.c(),P.m(l,p)):P&&(P.d(1),P=null)},i:G,o:G,d(c){c&&a(t),c&&a(e),c&&a(l),P&&P.d(),J=!1,ye(T)}}}function Fe(n,t,s){let{user:e}=t,{succ:l}=t,r="";function o(){if(s(0,e.passhash=A.hash(e.password),e),e.password==""){s(1,r="password cant be empty");return}if(e.name==""){s(1,r="username cant be empty");return}A.set_local("user_name",e.name),A.set_local("pass_hash",e.passhash),fetch(A.url+`login/${e.name}/${e.passhash}`,{method:"get"}).then(f=>{console.log(f),console.log({res:f}),f.text().then(h=>{console.log({response:h}),h=="true"?l():s(1,r="password or username incorrect")})})}function i(){e.name=this.value,s(0,e)}function u(){e.password=this.value,s(0,e)}return n.$$set=f=>{"user"in f&&s(0,e=f.user),"succ"in f&&s(3,l=f.succ)},[e,r,o,l,i,u]}class Ke extends K{constructor(t){super(),Y(this,t,Fe,Ce,z,{user:0,succ:3})}}function Ye(n){let t,s,e,l,r=n[0]?"login":"register",o,i,u,f,h;const d=[We,Qe],p=[];function N(_,w){return _[0]?0:1}return t=N(n),s=p[t]=d[t](n),{c(){s.c(),e=D(),l=v("button"),o=U(r),i=U(" instead"),this.h()},l(_){s.l(_),e=q(_),l=k(_,"BUTTON",{id:!0,class:!0});var w=j(l);o=H(w,r),i=H(w," instead"),w.forEach(a),this.h()},h(){O(l,"id","flip"),O(l,"class","svelte-1ykj3bu")},m(_,w){p[t].m(_,w),E(_,e,w),E(_,l,w),m(l,o),m(l,i),u=!0,f||(h=L(l,"click",n[3]),f=!0)},p(_,w){let y=t;t=N(_),t===y?p[t].p(_,w):(le(),M(p[y],1,1,()=>{p[y]=null}),se(),s=p[t],s?s.p(_,w):(s=p[t]=d[t](_),s.c()),R(s,1),s.m(e.parentNode,e)),(!u||w&1)&&r!==(r=_[0]?"login":"register")&&F(o,r)},i(_){u||(R(s),u=!0)},o(_){M(s),u=!1},d(_){p[t].d(_),_&&a(e),_&&a(l),f=!1,h()}}}function ze(n){let t,s;return t=new Re({props:{user:n[1]}}),{c(){X(t.$$.fragment)},l(e){Z(t.$$.fragment,e)},m(e,l){$(t,e,l),s=!0},p(e,l){const r={};l&2&&(r.user=e[1]),t.$set(r)},i(e){s||(R(t.$$.fragment,e),s=!0)},o(e){M(t.$$.fragment,e),s=!1},d(e){x(t,e)}}}function Qe(n){let t,s;return t=new Ke({props:{user:n[1],succ:n[2]}}),{c(){X(t.$$.fragment)},l(e){Z(t.$$.fragment,e)},m(e,l){$(t,e,l),s=!0},p(e,l){const r={};l&2&&(r.user=e[1]),t.$set(r)},i(e){s||(R(t.$$.fragment,e),s=!0)},o(e){M(t.$$.fragment,e),s=!1},d(e){x(t,e)}}}function We(n){let t,s;return t=new Ie({props:{user:n[1],succ:n[2]}}),{c(){X(t.$$.fragment)},l(e){Z(t.$$.fragment,e)},m(e,l){$(t,e,l),s=!0},p(e,l){const r={};l&2&&(r.user=e[1]),t.$set(r)},i(e){s||(R(t.$$.fragment,e),s=!0)},o(e){M(t.$$.fragment,e),s=!1},d(e){x(t,e)}}}function Xe(n){let t,s,e,l;const r=[ze,Ye],o=[];function i(u,f){return u[1].loggedIn==!0?0:1}return s=i(n),e=o[s]=r[s](n),{c(){t=v("div"),e.c(),this.h()},l(u){t=k(u,"DIV",{class:!0});var f=j(t);e.l(f),f.forEach(a),this.h()},h(){O(t,"class","welcome svelte-1ykj3bu")},m(u,f){E(u,t,f),o[s].m(t,null),l=!0},p(u,[f]){let h=s;s=i(u),s===h?o[s].p(u,f):(le(),M(o[h],1,1,()=>{o[h]=null}),se(),e=o[s],e?e.p(u,f):(e=o[s]=r[s](u),e.c()),R(e,1),e.m(t,null))},i(u){l||(R(e),l=!0)},o(u){M(e),l=!1},d(u){u&&a(t),o[s].d()}}}function Ze(n,t,s){let e=!0,l={name:A.get_local("user_name"),passhash:A.get_local("pass_hash")};l.loggedIn=l.name!=null;function r(){s(1,l.loggedIn=!0,l)}return[e,l,r,()=>{s(0,e=!e)}]}class $e extends K{constructor(t){super(),Y(this,t,Ze,Xe,z,{})}}function xe(n){let t,s,e;return s=new $e({}),{c(){t=v("body"),X(s.$$.fragment),this.h()},l(l){t=k(l,"BODY",{class:!0});var r=j(t);Z(s.$$.fragment,r),r.forEach(a),this.h()},h(){O(t,"class","svelte-qgsnnm")},m(l,r){E(l,t,r),$(s,t,null),e=!0},p:G,i(l){e||(R(s.$$.fragment,l),e=!0)},o(l){M(s.$$.fragment,l),e=!1},d(l){l&&a(t),x(s)}}}class lt extends K{constructor(t){super(),Y(this,t,null,xe,z,{})}}export{lt as default};
