import{S as K,i as Y,s as z,k as b,q as U,a as V,l as k,m as P,r as H,h as a,c as D,n as O,b as y,F as d,H as C,I as L,A,J as ye,p as Ee,u as F,K as te,L as W,e as ee,g as le,t as M,d as ne,f as R,v as X,w as Z,x as $,y as x}from"../../chunks/index-549be724.js";import{u as G}from"../../chunks/utils-7f6e77a1.js";function re(s){let t,n;return{c(){t=b("p"),n=U(s[1]),this.h()},l(e){t=k(e,"P",{style:!0});var l=P(t);n=H(l,s[1]),l.forEach(a),this.h()},h(){Ee(t,"color","red")},m(e,l){y(e,t,l),d(t,n)},p(e,l){l&2&&F(n,e[1])},d(e){e&&a(t)}}}function we(s){let t,n,e,l,r,o,i,u,f,_,h,p,I,m,N,E,B,T,w,c,v,j,S=s[1]&&re(s);return{c(){t=b("h1"),n=U("create account"),e=V(),l=b("h2"),r=U(`username
`),o=b("input"),i=V(),u=b("p"),f=U(`

password
`),_=b("input"),h=V(),p=b("p"),I=U(`

email
`),m=b("input"),N=V(),S&&S.c(),E=V(),B=b("p"),T=V(),w=b("button"),c=U("join"),this.h()},l(g){t=k(g,"H1",{});var J=P(t);n=H(J,"create account"),J.forEach(a),e=D(g),l=k(g,"H2",{});var q=P(l);r=H(q,`username
`),o=k(q,"INPUT",{type:!0}),i=D(q),u=k(q,"P",{}),P(u).forEach(a),f=H(q,`

password
`),_=k(q,"INPUT",{type:!0}),h=D(q),p=k(q,"P",{}),P(p).forEach(a),I=H(q,`

email
`),m=k(q,"INPUT",{}),N=D(q),S&&S.l(q),E=D(q),B=k(q,"P",{}),P(B).forEach(a),T=D(q),w=k(q,"BUTTON",{});var Q=P(w);c=H(Q,"join"),Q.forEach(a),q.forEach(a),this.h()},h(){O(o,"type","text"),O(_,"type","password")},m(g,J){y(g,t,J),d(t,n),y(g,e,J),y(g,l,J),d(l,r),d(l,o),C(o,s[0].name),d(l,i),d(l,u),d(l,f),d(l,_),C(_,s[0].password),d(l,h),d(l,p),d(l,I),d(l,m),C(m,s[0].email),d(l,N),S&&S.m(l,null),d(l,E),d(l,B),d(l,T),d(l,w),d(w,c),v||(j=[L(o,"input",s[4]),L(_,"input",s[5]),L(m,"input",s[6]),L(w,"click",s[2])],v=!0)},p(g,[J]){J&1&&o.value!==g[0].name&&C(o,g[0].name),J&1&&_.value!==g[0].password&&C(_,g[0].password),J&1&&m.value!==g[0].email&&C(m,g[0].email),g[1]?S?S.p(g,J):(S=re(g),S.c(),S.m(l,E)):S&&(S.d(1),S=null)},i:A,o:A,d(g){g&&a(t),g&&a(e),g&&a(l),S&&S.d(),v=!1,ye(j)}}}function Pe(s,t,n){let{user:e}=t,{succ:l}=t,r="";function o(){if(e.name&&e.password){if(n(0,e.passhash=G.hash(e.password),e),e.email==""){n(1,r="email cant be empty");return}if(e.password==""){n(1,r="password cant be empty");return}if(e.name==""){n(1,r="username cant be empty");return}G.set_local("user_name",e.name),G.set_local("pass_hash",e.passhash),G.set_local("email",e.email),fetch(G.url+`register/${e.name}/${e.email}/${e.passhash}`,{method:"get"}).then(_=>{console.log(_),_.text().then(h=>{console.log({response:h});let p=JSON.parse(h);console.log(p),p[0]?(n(0,e.loggedIn=!0,e),l()):n(1,r=`${p.details}`)})})}else n(1,r="cant be empty")}function i(){e.name=this.value,n(0,e)}function u(){e.password=this.value,n(0,e)}function f(){e.email=this.value,n(0,e)}return s.$$set=_=>{"user"in _&&n(0,e=_.user),"succ"in _&&n(3,l=_.succ)},[e,r,o,l,i,u,f]}class je extends K{constructor(t){super(),Y(this,t,Pe,we,z,{user:0,succ:3})}}function ie(s,t,n){const e=s.slice();return e[19]=t[n],e[21]=n,e}function ue(s,t,n){const e=s.slice();return e[19]=t[n],e[23]=n,e}function fe(s,t,n){const e=s.slice();return e[19]=t[n],e[25]=n,e}function Ie(s){let t,n=s[1].reduce(s[12])[0]+"",e,l,r,o;return{c(){t=b("h2"),e=U(n),l=U(" found the treasure!"),r=V(),o=b("p")},l(i){t=k(i,"H2",{});var u=P(t);e=H(u,n),l=H(u," found the treasure!"),u.forEach(a),r=D(i),o=k(i,"P",{}),P(o).forEach(a)},m(i,u){y(i,t,u),d(t,e),d(t,l),y(i,r,u),y(i,o,u)},p(i,u){u&3&&n!==(n=i[1].reduce(i[12])[0]+"")&&F(e,n)},d(i){i&&a(t),i&&a(r),i&&a(o)}}}function Ne(s){let t,n;return{c(){t=b("h2"),n=U("find the treasure at the center!")},l(e){t=k(e,"H2",{});var l=P(t);n=H(l,"find the treasure at the center!"),l.forEach(a)},m(e,l){y(e,t,l),d(t,n)},p:A,d(e){e&&a(t)}}}function Te(s){let t,n,e,l,r,o,i;return{c(){t=b("h2"),n=U("you got the treasure"),e=V(),l=b("h2"),r=U("get to the left border!"),o=V(),i=b("p")},l(u){t=k(u,"H2",{});var f=P(t);n=H(f,"you got the treasure"),f.forEach(a),e=D(u),l=k(u,"H2",{});var _=P(l);r=H(_,"get to the left border!"),_.forEach(a),o=D(u),i=k(u,"P",{}),P(i).forEach(a)},m(u,f){y(u,t,f),d(t,n),y(u,e,f),y(u,l,f),d(l,r),y(u,o,f),y(u,i,f)},p:A,d(u){u&&a(t),u&&a(e),u&&a(l),u&&a(o),u&&a(i)}}}function ae(s){let t,n,e,l=s[8](s[0].data[s[23]+s[25]*9])+"",r,o,i,u,f;function _(){return s[13](s[23],s[25])}return{c(){t=b("div"),n=b("div"),e=b("p"),r=U(l),this.h()},l(h){t=k(h,"DIV",{class:!0,id:!0});var p=P(t);n=k(p,"DIV",{class:!0});var I=P(n);e=k(I,"P",{class:!0});var m=P(e);r=H(m,l),m.forEach(a),I.forEach(a),p.forEach(a),this.h()},h(){O(e,"class","pinfo svelte-1oojlpg"),O(n,"class",o=W(s[6](s[0].data[s[23]+s[25]*9]))+" svelte-1oojlpg"),O(t,"class",i=W((s[23]==s[2][0]&&s[25]==s[2][1]?"active ":"")+de(s[0].data[s[23]+s[25]*9],s[0].offset[0]+s[0].offset[1]+s[23]+s[25]))+" svelte-1oojlpg"),O(t,"id","t"+s[23]+s[25])},m(h,p){y(h,t,p),d(t,n),d(n,e),d(e,r),u||(f=L(t,"click",_),u=!0)},p(h,p){s=h,p&1&&l!==(l=s[8](s[0].data[s[23]+s[25]*9])+"")&&F(r,l),p&1&&o!==(o=W(s[6](s[0].data[s[23]+s[25]*9]))+" svelte-1oojlpg")&&O(n,"class",o),p&5&&i!==(i=W((s[23]==s[2][0]&&s[25]==s[2][1]?"active ":"")+de(s[0].data[s[23]+s[25]*9],s[0].offset[0]+s[0].offset[1]+s[23]+s[25]))+" svelte-1oojlpg")&&O(t,"class",i)},d(h){h&&a(t),u=!1,f()}}}function ce(s){let t,n={length:9},e=[];for(let l=0;l<n.length;l+=1)e[l]=ae(fe(s,n,l));return{c(){t=b("div");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){t=k(l,"DIV",{class:!0});var r=P(t);for(let o=0;o<e.length;o+=1)e[o].l(r);r.forEach(a),this.h()},h(){O(t,"class","row svelte-1oojlpg")},m(l,r){y(l,t,r);for(let o=0;o<e.length;o+=1)e[o].m(t,null)},p(l,r){if(r&357){n={length:9};let o;for(o=0;o<n.length;o+=1){const i=fe(l,n,o);e[o]?e[o].p(i,r):(e[o]=ae(i),e[o].c(),e[o].m(t,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=n.length}},d(l){l&&a(t),te(e,l)}}}function Oe(s){let t;return{c(){t=b("div"),this.h()},l(n){t=k(n,"DIV",{class:!0}),P(t).forEach(a),this.h()},h(){O(t,"class","tile svelte-1oojlpg")},m(n,e){y(n,t,e)},p:A,d(n){n&&a(t)}}}function Se(s){let t,n={length:5},e=[];for(let l=0;l<n.length;l+=1)e[l]=he(ie(s,n,l));return{c(){t=b("div");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){t=k(l,"DIV",{class:!0});var r=P(t);for(let o=0;o<e.length;o+=1)e[o].l(r);r.forEach(a),this.h()},h(){O(t,"class","row svelte-1oojlpg")},m(l,r){y(l,t,r);for(let o=0;o<e.length;o+=1)e[o].m(t,null)},p(l,r){if(r&145){n={length:5};let o;for(o=0;o<n.length;o+=1){const i=ie(l,n,o);e[o]?e[o].p(i,r):(e[o]=he(i),e[o].c(),e[o].m(t,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=n.length}},d(l){l&&a(t),te(e,l)}}}function _e(s){let t,n,e,l,r;function o(){return s[14](s[21])}return{c(){t=b("div"),n=b("div"),e=V(),this.h()},l(i){t=k(i,"DIV",{class:!0});var u=P(t);n=k(u,"DIV",{class:!0});var f=P(n);f.forEach(a),e=D(u),u.forEach(a),this.h()},h(){O(n,"class",W(`piece t${s[21]+2}`)+" svelte-1oojlpg"),O(t,"class","tile svelte-1oojlpg")},m(i,u){y(i,t,u),d(t,n),d(t,e),l||(r=L(t,"click",o),l=!0)},p(i,u){s=i},d(i){i&&a(t),l=!1,r()}}}function he(s){let t,n=s[4][s[21]]<=s[0].energy&&_e(s);return{c(){n&&n.c(),t=ee()},l(e){n&&n.l(e),t=ee()},m(e,l){n&&n.m(e,l),y(e,t,l)},p(e,l){e[4][e[21]]<=e[0].energy?n?n.p(e,l):(n=_e(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&a(t)}}}function Ue(s){let t,n,e,l,r,o,i,u,f=Math.round(s[0].energy*50)/50+"",_,h;function p(c,v){return c[0].got_treasure?Te:c[0].treasure_holder==-1?Ne:Ie}let I=p(s),m=I(s),N={length:9},E=[];for(let c=0;c<N.length;c+=1)E[c]=ce(ue(s,N,c));function B(c,v){return c[3]?Se:Oe}let T=B(s),w=T(s);return{c(){t=b("div"),m.c(),n=V();for(let c=0;c<E.length;c+=1)E[c].c();e=V(),l=b("p"),r=V(),w.c(),o=V(),i=b("div"),u=b("p"),_=U(f),this.h()},l(c){t=k(c,"DIV",{class:!0});var v=P(t);m.l(v),n=D(v);for(let g=0;g<E.length;g+=1)E[g].l(v);e=D(v),l=k(v,"P",{}),P(l).forEach(a),r=D(v),w.l(v),o=D(v),i=k(v,"DIV",{class:!0,style:!0});var j=P(i);u=k(j,"P",{class:!0});var S=P(u);_=H(S,f),S.forEach(a),j.forEach(a),v.forEach(a),this.h()},h(){O(u,"class","svelte-1oojlpg"),O(i,"class","energybar svelte-1oojlpg"),O(i,"style",h=`width:${s[0].energy*2.7}em`),O(t,"class","board svelte-1oojlpg")},m(c,v){y(c,t,v),m.m(t,null),d(t,n);for(let j=0;j<E.length;j+=1)E[j].m(t,null);d(t,e),d(t,l),d(t,r),w.m(t,null),d(t,o),d(t,i),d(i,u),d(u,_)},p(c,[v]){if(I===(I=p(c))&&m?m.p(c,v):(m.d(1),m=I(c),m&&(m.c(),m.m(t,n))),v&357){N={length:9};let j;for(j=0;j<N.length;j+=1){const S=ue(c,N,j);E[j]?E[j].p(S,v):(E[j]=ce(S),E[j].c(),E[j].m(t,e))}for(;j<E.length;j+=1)E[j].d(1);E.length=N.length}T===(T=B(c))&&w?w.p(c,v):(w.d(1),w=T(c),w&&(w.c(),w.m(t,o))),v&1&&f!==(f=Math.round(c[0].energy*50)/50+"")&&F(_,f),v&1&&h!==(h=`width:${c[0].energy*2.7}em`)&&O(i,"style",h)},i:A,o:A,d(c){c&&a(t),m.d(),te(E,c),w.d()}}}let pe=20,He=.2;function me(s,t){return s+t*9}function de(s,t){return s[0]==-1?"water tile":s[1]!=0?`c${s[0]} tile`:["light","dark"][t%2]+" tile"}function Je(s,t,n){let{state:e}=t,{my_number:l}=t,{make_move:r}=t,{opponents:o}=t;e.data;let i=[4,4];const u=[9,3,3,5,1];let f=[-5,-5],_=!1,h=1;setInterval(()=>{e.energy<=10&&n(0,e.energy=Math.min(e.energy+He/pe,10),e)},1e3/pe);function p(c,v){e.data[c+v*9][1]==1?n(3,_=!0):n(3,_=!1);{let S=me(f[0],f[1]),g=me(c,v);if(g==S)return;r(S,g,h,J=>{J&&(h=0)})}I(c,v)}function I(c,v){let j=document.querySelector("#t"+f[0]+f[1]);j&&j.classList.remove("active"),n(2,f=[c,v]),document.querySelector("#t"+c+v).classList.add("active")}function m(c){return c[1]==-2?"piece treasure":c[1]<=0?"":c[1]==1&&h>1&&c[0]==l?`piece t${h}`:`piece t${c[1]}`+(c[0]==l?"":" enemy")}function N(c){h=c+2}function E(c){if(c[1]==1){let v=o.reduce((j,S)=>j[1]==c[0]?j:S)[0];return v=v.split(" ")[0],v.slice(0,8)}return""}const B=(c,v)=>c[1]==e.treasure_holder?c:v,T=(c,v)=>p(c,v),w=c=>{N(c)};return s.$$set=c=>{"state"in c&&n(0,e=c.state),"my_number"in c&&n(9,l=c.my_number),"make_move"in c&&n(10,r=c.make_move),"opponents"in c&&n(1,o=c.opponents)},s.$$.update=()=>{s.$$.dirty&2053&&e.offset!=i&&(n(2,f=[f[0]+i[1]-e.offset[1],f[1]+i[0]-e.offset[0]]),n(11,i=e.offset))},[e,o,f,_,u,p,m,N,E,l,r,i,B,T,w]}class Ve extends K{constructor(t){super(),Y(this,t,Je,Ue,z,{state:0,my_number:9,make_move:10,opponents:1})}}function ge(s,t,n){const e=s.slice();return e[14]=t[n][0],e[15]=t[n][1],e}function De(s){let t,n,e,l,r=s[6][0]+"",o,i,u=s[5].value+"",f,_,h,p,I,m,N,E,B,T,w,c,v,j,S;return{c(){t=b("h2"),n=U("GAME OVER"),e=V(),l=b("h3"),o=U(r),i=U(" won "),f=U(u),_=U(" points!"),h=V(),p=b("p"),I=V(),m=b("button"),N=U("Play again"),E=V(),B=b("p"),T=V(),w=b("a"),c=b("button"),v=U("leaderboard"),this.h()},l(g){t=k(g,"H2",{});var J=P(t);n=H(J,"GAME OVER"),J.forEach(a),e=D(g),l=k(g,"H3",{});var q=P(l);o=H(q,r),i=H(q," won "),f=H(q,u),_=H(q," points!"),q.forEach(a),h=D(g),p=k(g,"P",{}),P(p).forEach(a),I=D(g),m=k(g,"BUTTON",{id:!0,class:!0});var Q=P(m);N=H(Q,"Play again"),Q.forEach(a),E=D(g),B=k(g,"P",{}),P(B).forEach(a),T=D(g),w=k(g,"A",{href:!0});var se=P(w);c=k(se,"BUTTON",{class:!0});var oe=P(c);v=H(oe,"leaderboard"),oe.forEach(a),se.forEach(a),this.h()},h(){O(m,"id","joingame"),O(m,"class","svelte-lev714"),O(c,"class","leaderboard svelte-lev714"),O(w,"href","/leaderboard")},m(g,J){y(g,t,J),d(t,n),y(g,e,J),y(g,l,J),d(l,o),d(l,i),d(l,f),d(l,_),y(g,h,J),y(g,p,J),y(g,I,J),y(g,m,J),d(m,N),y(g,E,J),y(g,B,J),y(g,T,J),y(g,w,J),d(w,c),d(c,v),j||(S=L(m,"click",s[7]),j=!0)},p(g,J){J&64&&r!==(r=g[6][0]+"")&&F(o,r),J&32&&u!==(u=g[5].value+"")&&F(f,u)},i:A,o:A,d(g){g&&a(t),g&&a(e),g&&a(l),g&&a(h),g&&a(p),g&&a(I),g&&a(m),g&&a(E),g&&a(B),g&&a(T),g&&a(w),j=!1,S()}}}function Be(s){let t,n;return t=new Ve({props:{state:s[4],my_number:s[2],make_move:s[9],opponents:s[3]}}),{c(){X(t.$$.fragment)},l(e){Z(t.$$.fragment,e)},m(e,l){$(t,e,l),n=!0},p(e,l){const r={};l&16&&(r.state=e[4]),l&4&&(r.my_number=e[2]),l&8&&(r.opponents=e[3]),t.$set(r)},i(e){n||(R(t.$$.fragment,e),n=!0)},o(e){M(t.$$.fragment,e),n=!1},d(e){x(t,e)}}}function qe(s){let t,n,e,l,r,o=s[3],i=[];for(let f=0;f<o.length;f+=1)i[f]=ve(ge(s,o,f));let u=s[3].length>1&&be(s);return{c(){t=b("h2"),n=U("waiting for players ..."),e=V();for(let f=0;f<i.length;f+=1)i[f].c();l=V(),u&&u.c(),r=ee()},l(f){t=k(f,"H2",{});var _=P(t);n=H(_,"waiting for players ..."),_.forEach(a),e=D(f);for(let h=0;h<i.length;h+=1)i[h].l(f);l=D(f),u&&u.l(f),r=ee()},m(f,_){y(f,t,_),d(t,n),y(f,e,_);for(let h=0;h<i.length;h+=1)i[h].m(f,_);y(f,l,_),u&&u.m(f,_),y(f,r,_)},p(f,_){if(_&8){o=f[3];let h;for(h=0;h<o.length;h+=1){const p=ge(f,o,h);i[h]?i[h].p(p,_):(i[h]=ve(p),i[h].c(),i[h].m(l.parentNode,l))}for(;h<i.length;h+=1)i[h].d(1);i.length=o.length}f[3].length>1?u?u.p(f,_):(u=be(f),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:A,o:A,d(f){f&&a(t),f&&a(e),te(i,f),f&&a(l),u&&u.d(f),f&&a(r)}}}function Ae(s){let t,n,e,l,r,o,i,u,f,_;return{c(){t=b("button"),n=U("Join game"),e=V(),l=b("p"),r=V(),o=b("a"),i=b("button"),u=U("leaderboard"),this.h()},l(h){t=k(h,"BUTTON",{id:!0,class:!0});var p=P(t);n=H(p,"Join game"),p.forEach(a),e=D(h),l=k(h,"P",{}),P(l).forEach(a),r=D(h),o=k(h,"A",{href:!0});var I=P(o);i=k(I,"BUTTON",{class:!0});var m=P(i);u=H(m,"leaderboard"),m.forEach(a),I.forEach(a),this.h()},h(){O(t,"id","joingame"),O(t,"class","svelte-lev714"),O(i,"class","leaderboard svelte-lev714"),O(o,"href","/leaderboard")},m(h,p){y(h,t,p),d(t,n),y(h,e,p),y(h,l,p),y(h,r,p),y(h,o,p),d(o,i),d(i,u),f||(_=L(t,"click",s[7]),f=!0)},p:A,i:A,o:A,d(h){h&&a(t),h&&a(e),h&&a(l),h&&a(r),h&&a(o),f=!1,_()}}}function ve(s){let t,n=s[14]+"",e;return{c(){t=b("p"),e=U(n)},l(l){t=k(l,"P",{});var r=P(t);e=H(r,n),r.forEach(a)},m(l,r){y(l,t,r),d(t,e)},p(l,r){r&8&&n!==(n=l[14]+"")&&F(e,n)},d(l){l&&a(t)}}}function be(s){let t,n,e,l;return{c(){t=b("button"),n=U("Start"),this.h()},l(r){t=k(r,"BUTTON",{id:!0,class:!0});var o=P(t);n=H(o,"Start"),o.forEach(a),this.h()},h(){O(t,"id","startgame"),O(t,"class","svelte-lev714")},m(r,o){y(r,t,o),d(t,n),e||(l=L(t,"click",s[8]),e=!0)},p:A,d(r){r&&a(t),e=!1,l()}}}function Ge(s){let t,n,e=s[0].name+"",l,r,o,i,u;const f=[Ae,qe,Be,De],_=[];function h(p,I){return p[1]==0?0:p[1]==1?1:p[1]==2?2:p[1]==3?3:-1}return~(o=h(s))&&(i=_[o]=f[o](s)),{c(){t=b("h2"),n=b("p"),l=U(e),r=V(),i&&i.c(),this.h()},l(p){t=k(p,"H2",{});var I=P(t);n=k(I,"P",{class:!0});var m=P(n);l=H(m,e),m.forEach(a),r=D(I),i&&i.l(I),I.forEach(a),this.h()},h(){O(n,"class","usertag svelte-lev714")},m(p,I){y(p,t,I),d(t,n),d(n,l),d(t,r),~o&&_[o].m(t,null),u=!0},p(p,[I]){(!u||I&1)&&e!==(e=p[0].name+"")&&F(l,e);let m=o;o=h(p),o===m?~o&&_[o].p(p,I):(i&&(le(),M(_[m],1,1,()=>{_[m]=null}),ne()),~o?(i=_[o],i?i.p(p,I):(i=_[o]=f[o](p),i.c()),R(i,1),i.m(t,null)):i=null)},i(p){u||(R(i),u=!0)},o(p){M(i),u=!1},d(p){p&&a(t),~o&&_[o].d()}}}function Le(s,t,n){let{user:e}=t,l=0,r=0,o=0,i=0,u=[],f=null,_=null,h=null;function p(){fetch(G.url+`join_game/${e.name}/${e.passhash}`).then(E=>{console.log(E),E.text().then(B=>{console.log({text:B});let T=JSON.parse(B);console.log({data:T}),T.Join?(n(1,l=1),console.log("got join message"),r=T.Join.token,o=T.Join.game_id,n(2,i=T.Join.number),I()):T.Lobby?console.log("got lobby message"):T.State&&console.log("got state message")})})}function I(){console.log("sending update request"),fetch(G.url+`get_update/${o}/${r}`).then(E=>{console.log(E),E.text().then(B=>{console.log({text:B});let T=JSON.parse(B);if(console.log({data:T}),T.Join)console.log("got join message");else if(T.Lobby)console.log("got lobby message"),n(3,u=T.Lobby.players);else if(T.State)console.log("got state message"),n(4,f=T.State),n(1,l=2);else if(T.End){n(1,l=3),console.log("got game over message"),n(5,_=T.End),console.log(_),n(6,h=u.reduce((w,c)=>w[1]==_.winning_number?w:c));return}I()})})}function m(){console.log("sending start request"),fetch(G.url+`start_game/${o}/${r}`).then(E=>{console.log(E),E.text().then(B=>{console.log(B)})})}function N(E,B,T,w){console.log("sending move"),fetch(G.url+`make_move/${o}/${r}/${E}/${B}/${T}`,{method:"post"}).then(c=>{c.text().then(v=>{console.log(v);let j=JSON.parse(v);w(j)})})}return s.$$set=E=>{"user"in E&&n(0,e=E.user)},[e,l,i,u,f,_,h,p,m,N]}class Me extends K{constructor(t){super(),Y(this,t,Le,Ge,z,{user:0})}}function ke(s){let t,n;return{c(){t=b("p"),n=U(s[1]),this.h()},l(e){t=k(e,"P",{style:!0});var l=P(t);n=H(l,s[1]),l.forEach(a),this.h()},h(){Ee(t,"color","red")},m(e,l){y(e,t,l),d(t,n)},p(e,l){l&2&&F(n,e[1])},d(e){e&&a(t)}}}function Re(s){let t,n,e,l,r,o,i,u,f,_,h,p,I,m,N,E,B,T,w=s[1]&&ke(s);return{c(){t=b("h1"),n=U("login"),e=V(),l=b("h2"),r=U(`username
`),o=b("input"),i=V(),u=b("p"),f=U(`

password
`),_=b("input"),h=V(),w&&w.c(),p=V(),I=b("p"),m=V(),N=b("button"),E=U("login"),this.h()},l(c){t=k(c,"H1",{});var v=P(t);n=H(v,"login"),v.forEach(a),e=D(c),l=k(c,"H2",{});var j=P(l);r=H(j,`username
`),o=k(j,"INPUT",{type:!0}),i=D(j),u=k(j,"P",{}),P(u).forEach(a),f=H(j,`

password
`),_=k(j,"INPUT",{type:!0}),h=D(j),w&&w.l(j),p=D(j),I=k(j,"P",{}),P(I).forEach(a),m=D(j),N=k(j,"BUTTON",{});var S=P(N);E=H(S,"login"),S.forEach(a),j.forEach(a),this.h()},h(){O(o,"type","text"),O(_,"type","password")},m(c,v){y(c,t,v),d(t,n),y(c,e,v),y(c,l,v),d(l,r),d(l,o),C(o,s[0].name),d(l,i),d(l,u),d(l,f),d(l,_),C(_,s[0].password),d(l,h),w&&w.m(l,null),d(l,p),d(l,I),d(l,m),d(l,N),d(N,E),B||(T=[L(o,"input",s[4]),L(_,"input",s[5]),L(N,"click",s[2])],B=!0)},p(c,[v]){v&1&&o.value!==c[0].name&&C(o,c[0].name),v&1&&_.value!==c[0].password&&C(_,c[0].password),c[1]?w?w.p(c,v):(w=ke(c),w.c(),w.m(l,p)):w&&(w.d(1),w=null)},i:A,o:A,d(c){c&&a(t),c&&a(e),c&&a(l),w&&w.d(),B=!1,ye(T)}}}function Ce(s,t,n){let{user:e}=t,{succ:l}=t,r="";function o(){if(n(0,e.passhash=G.hash(e.password),e),e.password==""){n(1,r="password cant be empty");return}if(e.name==""){n(1,r="username cant be empty");return}G.set_local("user_name",e.name),G.set_local("pass_hash",e.passhash),fetch(G.url+`login/${e.name}/${e.passhash}`,{method:"get"}).then(f=>{console.log(f),console.log({res:f}),f.text().then(_=>{console.log({response:_}),_=="true"?l():n(1,r="password or username incorrect")})})}function i(){e.name=this.value,n(0,e)}function u(){e.password=this.value,n(0,e)}return s.$$set=f=>{"user"in f&&n(0,e=f.user),"succ"in f&&n(3,l=f.succ)},[e,r,o,l,i,u]}class Fe extends K{constructor(t){super(),Y(this,t,Ce,Re,z,{user:0,succ:3})}}function Ke(s){let t,n,e,l,r=s[0]?"login":"register",o,i,u,f,_;const h=[Qe,ze],p=[];function I(m,N){return m[0]?0:1}return t=I(s),n=p[t]=h[t](s),{c(){n.c(),e=V(),l=b("button"),o=U(r),i=U(" instead"),this.h()},l(m){n.l(m),e=D(m),l=k(m,"BUTTON",{id:!0,class:!0});var N=P(l);o=H(N,r),i=H(N," instead"),N.forEach(a),this.h()},h(){O(l,"id","flip"),O(l,"class","svelte-1ykj3bu")},m(m,N){p[t].m(m,N),y(m,e,N),y(m,l,N),d(l,o),d(l,i),u=!0,f||(_=L(l,"click",s[3]),f=!0)},p(m,N){let E=t;t=I(m),t===E?p[t].p(m,N):(le(),M(p[E],1,1,()=>{p[E]=null}),ne(),n=p[t],n?n.p(m,N):(n=p[t]=h[t](m),n.c()),R(n,1),n.m(e.parentNode,e)),(!u||N&1)&&r!==(r=m[0]?"login":"register")&&F(o,r)},i(m){u||(R(n),u=!0)},o(m){M(n),u=!1},d(m){p[t].d(m),m&&a(e),m&&a(l),f=!1,_()}}}function Ye(s){let t,n;return t=new Me({props:{user:s[1]}}),{c(){X(t.$$.fragment)},l(e){Z(t.$$.fragment,e)},m(e,l){$(t,e,l),n=!0},p(e,l){const r={};l&2&&(r.user=e[1]),t.$set(r)},i(e){n||(R(t.$$.fragment,e),n=!0)},o(e){M(t.$$.fragment,e),n=!1},d(e){x(t,e)}}}function ze(s){let t,n;return t=new Fe({props:{user:s[1],succ:s[2]}}),{c(){X(t.$$.fragment)},l(e){Z(t.$$.fragment,e)},m(e,l){$(t,e,l),n=!0},p(e,l){const r={};l&2&&(r.user=e[1]),t.$set(r)},i(e){n||(R(t.$$.fragment,e),n=!0)},o(e){M(t.$$.fragment,e),n=!1},d(e){x(t,e)}}}function Qe(s){let t,n;return t=new je({props:{user:s[1],succ:s[2]}}),{c(){X(t.$$.fragment)},l(e){Z(t.$$.fragment,e)},m(e,l){$(t,e,l),n=!0},p(e,l){const r={};l&2&&(r.user=e[1]),t.$set(r)},i(e){n||(R(t.$$.fragment,e),n=!0)},o(e){M(t.$$.fragment,e),n=!1},d(e){x(t,e)}}}function We(s){let t,n,e,l;const r=[Ye,Ke],o=[];function i(u,f){return u[1].loggedIn==!0?0:1}return n=i(s),e=o[n]=r[n](s),{c(){t=b("div"),e.c(),this.h()},l(u){t=k(u,"DIV",{class:!0});var f=P(t);e.l(f),f.forEach(a),this.h()},h(){O(t,"class","welcome svelte-1ykj3bu")},m(u,f){y(u,t,f),o[n].m(t,null),l=!0},p(u,[f]){let _=n;n=i(u),n===_?o[n].p(u,f):(le(),M(o[_],1,1,()=>{o[_]=null}),ne(),e=o[n],e?e.p(u,f):(e=o[n]=r[n](u),e.c()),R(e,1),e.m(t,null))},i(u){l||(R(e),l=!0)},o(u){M(e),l=!1},d(u){u&&a(t),o[n].d()}}}function Xe(s,t,n){let e=!0,l={name:G.get_local("user_name"),passhash:G.get_local("pass_hash")};l.loggedIn=l.name!=null;function r(){n(1,l.loggedIn=!0,l)}return[e,l,r,()=>{n(0,e=!e)}]}class Ze extends K{constructor(t){super(),Y(this,t,Xe,We,z,{})}}function $e(s){let t,n,e;return n=new Ze({}),{c(){t=b("body"),X(n.$$.fragment),this.h()},l(l){t=k(l,"BODY",{class:!0});var r=P(t);Z(n.$$.fragment,r),r.forEach(a),this.h()},h(){O(t,"class","svelte-qgsnnm")},m(l,r){y(l,t,r),$(n,t,null),e=!0},p:A,i(l){e||(R(n.$$.fragment,l),e=!0)},o(l){M(n.$$.fragment,l),e=!1},d(l){l&&a(t),x(n)}}}class tt extends K{constructor(t){super(),Y(this,t,null,$e,z,{})}}export{tt as default};
